# #######################################################################################
# ---------------------------------------------------------------------------------------
# File:   __init__.py
# Author: Luis Monteiro
#
# Created on nov 11, 2019, 22:00 PM
# ---------------------------------------------------------------------------------------
# #######################################################################################
# ---------------------------------------------------------
# extern
# ---------------------------------------------------------
from git.cmd  import Git
from git.exc  import GitCommandError
from sys      import argv
from argparse import ArgumentParser
from tempfile import TemporaryFile
from shutil   import copyfileobj as copy
from filecmp  import cmp         as equal
# ---------------------------------------------------------
# internal
# ---------------------------------------------------------
from .native  import extract
from .native  import load
# #############################################################################
# -----------------------------------------------------------------------------
# translate
# -----------------------------------------------------------------------------
# #############################################################################
def translate(path, type):
    print("tranlate --type={} {}".format(type, path))
    try:
        data = extract(path, type)
        print(path)
        print(type)
        print(data)
        load(data, path, type)
    except Exception as ex:
        print(str(ex))
    return 0
# #############################################################################
# -----------------------------------------------------------------------------
# entry point
# -----------------------------------------------------------------------------
# #############################################################################
# -------------------------------------------------------------------
# main function
# -------------------------------------------------------------------  
def main_translate(args=None):
    parser = ArgumentParser()
    parser.add_argument('path',    
        help    = 'path for parent folder',  
        type    = str, 
        nargs   = '?',
        default = '.')
    parser.add_argument('--type', '-t',
        type    = str, 
        default = 'canoe')
    args = parser.parse_args(args=args)
    return translate(args.path, args.type)
# -------------------------------------------------------------------
# main file
# -------------------------------------------------------------------    
if __name__ == "__main__":
    main_translate()
# #######################################################################################
# ---------------------------------------------------------------------------------------
# end
# ---------------------------------------------------------------------------------------
#########################################################################################